# codegen

This package has utilities for generating javascript files.

## API

### createComponentsFile(_options_)

This function reads a provided directory and looks for react components. All found components that have an `index.js` file and use the same name for the `.jsx` file and the containing folder name will be imported and exported from the resulting javascript file

#### Options

- **componentsPath**: `String`
  (The path in which to look for components)

- **fileHeader**: `String` = `"// NOTE: Do not edit this file. It is automatically generated."`
  (String prepended to the generated file)

- **fileName**: `String`
  (Name of the file to write)

- **outputPath**: `String`
  (Full path to the folder in which to write the file)

- **prettierOptions**: `Object`
  (Prettier options object, used to format the output file)

#### Example

**File tree**

```
/
  components
    component
      component.jsx
      index.js
    other-component
      blabla.jsx
      index.js
    another-component
      another-component.jsx
```

**createComponentsFile**

```js
const { createComponentsFile } = require("@creuna/codegen");
const path = require("path");

createComponentsFile({
  componentsPath: path.join(__dirname, "components"),
  fileName: "app.components.js",
  outputPath: __dirname
});
```

**app.components.js**

```js
// NOTE: Do not edit this file. It is automatically generated.
import Component from "./components/component";

export { Component };
```

Note that `other-component` is excluded because `blabla.jsx` file has a different name than the folder and `another-component` is excluded because it doesn't have an `index.js` file.

### createPagesFile(_options_)

This function is inteded for use with static site generation. It reads a provided directory and looks for react components. All found components that have an `index.js` file and use the same name for the `.jsx` file and the containing folder name will be imported, parsed for metadata and exported from the resulting javascript file. The function supports passing metadata in comments using `yaml` syntax.

#### Options

- **fileHeader**: `String` = `"// NOTE: Do not edit this file. It is automatically generated."`
  (String prepended to the generated file)

- **fileName**: `String`
  (Name of the file to write)

- **outputPath**: `String`
  (Full path to the folder in which to write the file)

- **pagesPath**: `String`
  (The path in which to look for page components)

- **prettierOptions**: `Object`
  (Prettier options object, used to format the output file)

#### Example

**Example page component**

```jsx
/*
group: Eksempelgruppe
name: Eksempelside
path: /eksempelside
*/
import React from "react";

const ExamplePage = () => <div />;

export default ExamplePage;
```

**createPagesFile**

```js
const { createPagesFile } = require("@creuna/codegen");
const path = require("path");

createPagesFile({
  fileName: "pages.js",
  pagesPath: path.join(__dirname, "pages"),
  outputPath: __dirname
});
```

**pages.js**

```js
// NOTE: Do not edit this file. It is automatically generated.
import ExamplePage from "./example-page";

export default [
  {
    component: ExamplePage,
    group: "Eksempelgruppe",
    name: "Eksempelside",
    path: "/eksempelside"
  }
];
```
